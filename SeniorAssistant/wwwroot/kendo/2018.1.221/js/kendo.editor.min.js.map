{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableWizardInsert","cleanFormatting","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizableWidget","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","msie","edge","map","href","join","close","_blur","old","val","_oldValue","encodedValue","get","ownerDocument","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","getElementsByTagName","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","click","target","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","show","focusout","toolbarContainerElement","active","contains","preventPopupHide","is","focused","removeClass","immutables","Immutables","parents","stopPropagation","gecko","which","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","blockParents","nodes","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","tagName","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","mapStart","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","index","select","selectBox","view","dataSource","decorate","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","complexBlocks","toolsToBeUpdated","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","expandImmutablesIn","startImmutableParent","endImmutableParent","immutablesContext","editableNodes","randomId","chars","round","random","serialized","replaceWith","removeAttr","deletingKey","updateToolOptions","_initOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","cancelDeleting","closestSelectionLi","closestImmutableLi","backspace","del","nextImmutable","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","finishUpdate","endRestorePoint","GenericCommand","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggleClass","toggle","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","anchor","origin","copyAnchorStyles","activate","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","display","uiData","widget","groupUi","uiElement","trackImmutables","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","ViewHtmlCommand","dialog","center","FormatCommand","FormatTool","ev","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","formatNode","formatNodes","consolidate","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","newRange","ColorTool","palette","_widget","ColorPicker","toolIcon","picker","sender","_popup","fontWeight","fontStyle","lastIndexOfRegExp","str","indexOfRegExp","r","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","_initialText","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","startNode","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","ancestor","images","imageFormat","imageAttributes","nonImages","_handleImmutables","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","ListFormatter","BlockFormatTool","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","unwrapTag","isList","li","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ul","fragment","ListCommand","ListTool","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","keyDown","dialogHeight","isIE","ImageBrowser","transport","read","_imageBrowser","selected","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","genericCommand","postProcess","InsertHtmlTool","_selectBox","selectbox","initialValue","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","_exec","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","emptyParagraphContent","_insertParagraphAfter","NewLineCommand","filler","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","row","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","cells","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_valid","status","selectedRows","selectedColumns","changed","tableSize","InsertRowCommand","cellCount","newRow","td","InsertColumnCommand","columnIndex","cell","newCell","table","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardRange","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","applicable","elm","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","_createList","styleType","listStyleType","placeholder","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","parseFloat","removeAttributes","removeAttributeNode","createColGroup","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","tdCleaner","cellText","getSibling","PREVIOUS_SIBLING","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","removeTableContent","backspaceHandler","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","isEndOfLink","_handleSelection","_surroundFullySelectedAnchor","_join","startImmutable","endImmutable","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","print","lowerBound","upperBound","getScrollBarWidth","scrollHeight","clientHeight","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnWidth","columnLeftOffset","adjacentColumnWidth","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowPosition","tableBodyTopOffset","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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IAAK,MACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,I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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a tabindex=\"0\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\" title=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span unselectable=\"on\" class=\"k-icon k-i-more-vertical\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (browser.msie || browser.edge ? 'height:auto;' : '') + (os.ios ? 'word-break:break-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        $(textarea.get(0).ownerDocument).trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target);\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (iframe) {\n                    if (activeElement != body && activeElement != iframe) {\n                        scrollTop = documentElement.scrollTop;\n                        body.focus();\n                        documentElement.scrollTop = scrollTop;\n                    }\n                } else {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            isBr: function (node) {\n                return Dom.name(node) == 'br';\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (node.childNodes.length === 0 || Dom.allWhitespaceContent(node) && Dom.isBlock(node) && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/serializer'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/components'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/command', ['editor/immutables'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/range'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = editorNS.EditorUtils;\n        var ToolTemplate = editorNS.ToolTemplate;\n        var Tool = editorNS.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && $(current).is('a') && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/viewhtml', ['editor/command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content;\n                options.serialization.immutables = editor.immutables;\n                content = ViewHtmlCommand.indent(editor.value());\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<div class=\\'k-edit-form-container\\'></div>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/format', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, Tool = Editor.Tool, Command = Editor.Command, EditorUtils = Editor.EditorUtils;\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        $.extend(Editor, {\n            FormatCommand: FormatCommand,\n            FormatTool: FormatTool\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/inlineformat', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, preventDefault = function (ev) {\n                ev.preventDefault();\n            }, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        if (dom.is(formatNode, 'font')) {\n                            if (styleAttr.color) {\n                                formatNode.removeAttribute('color');\n                            }\n                            if (styleAttr.fontName) {\n                                formatNode.removeAttribute('face');\n                            }\n                            if (styleAttr.fontSize) {\n                                formatNode.removeAttribute('size');\n                            }\n                        }\n                        dom.attr(formatNode, attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        picker.value(null);\n                        picker._popup.element.on(MOUSEDOWN_NS, preventDefault);\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*').attr('unselectable', 'on');\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/link', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatblock', ['editor/plugins/format'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/lists', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/formatting', ['editor/plugins/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/image', [\n        'kendo.imagebrowser',\n        'editor/command'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/insert', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, GenericCommand = editorNS.GenericCommand, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, extend = $.extend;\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        extend(editorNS, {\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/indent', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/linebreak', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/file', [\n        'kendo.filebrowser',\n        'editor/plugins/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/tables', ['editor/plugins/formatblock'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.buttonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/clipboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, extend = $.extend;\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0)) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content, name = dom.name(p);\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    if (name != 'p') {\n                        content = '<' + name + '>' + p.innerHTML + '</' + name + '>';\n                    } else {\n                        content = p.innerHTML;\n                    }\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ];\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.append(p);\n                        }\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                } else if (dom.isBr(node)) {\n                    this.htmlLines.appendText(this.separators.line);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        extend(editorNS, {\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/keyboard', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, RangeUtils = editorNS.RangeUtils, dom = editorNS.Dom, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    editorNS._finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        extend(editorNS, {\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/exportpdf', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, { ExportPdfCommand: ExportPdfCommand });\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/plugins/print', ['editor/command'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, editorNS = kendo.ui.editor, Command = editorNS.Command, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, extend = $.extend;\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        extend(editorNS, { PrintCommand: PrintCommand });\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: tableBody.position().top + scrollTopOffset,\n                    left: column.position().left + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.position().left;\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var rootElement = $(options.rootElement);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var handleOffset = constrain({\n                    value: resizeHandle.position().left + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(column.next());\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rowPosition = row.position();\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: rowPosition.top + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowPosition.left + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyTopOffset = tableBody.position().top;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var handleOffset = constrain({\n                    value: resizeHandle.position().top + scrollTopOffset + e.y.delta,\n                    min: $(row).position().top + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/plugins/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || null,\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor,\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', ['editor/table-wizard/table-wizard-command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-input k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.tabstrip',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/command',\n        'editor/components',\n        'editor/toolbar',\n        'editor/immutables',\n        'editor/plugins/viewhtml',\n        'editor/plugins/link',\n        'editor/plugins/lists',\n        'editor/plugins/formatting',\n        'editor/plugins/image',\n        'editor/plugins/import',\n        'editor/plugins/insert',\n        'editor/plugins/export',\n        'editor/plugins/indent',\n        'editor/plugins/linebreak',\n        'editor/plugins/format',\n        'editor/plugins/inlineformat',\n        'editor/plugins/formatblock',\n        'editor/plugins/file',\n        'editor/plugins/tables',\n        'editor/plugins/clipboard',\n        'editor/plugins/keyboard',\n        'editor/plugins/exportpdf',\n        'editor/plugins/print',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}